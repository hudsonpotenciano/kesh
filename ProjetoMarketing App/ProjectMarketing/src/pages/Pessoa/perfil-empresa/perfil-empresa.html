<ion-header>
    <ion-navbar>
        <ion-title text-left>
            Perfil
        </ion-title>

    </ion-navbar>
</ion-header>
<ion-content>

    <ion-list class="cards">

        <ion-item no-lines class="item-info">
            <ion-avatar item-start>
                <img class="logo" src="{{empresaProvider.obtenhaLogoEmpresa(dadosPessoaEmpresa.Empresa.IdEmpresa)}}" alt="">
            </ion-avatar>
            <h2>{{dadosPessoaEmpresa.Perfil.Descricao}}</h2>
            <p class="estrela-nota" *ngIf="dadosPessoaEmpresa.NotaGeral"><img onerror="this.src='https://png.pngtree.com/svg/20170602/person_1058425.png'" src="./assets/svg/estrela.svg" alt=""> {{dadosPessoaEmpresa.NotaGeral}}</p>

        </ion-item>

        <ion-row class="grid-botoes">
            <ion-col (click)="abraPopoverCatalogo($event)">
                <button text-center no-lines ion-item clear full> 
        <ion-icon class="icone" name="images"></ion-icon> Galeria
        </button>
            </ion-col>
            <ion-col (click)="rota()">
                <button text-center no-lines ion-item clear full> 
                <ion-icon class="icone" name="navigate"></ion-icon> Rota
        </button>
            </ion-col>
        </ion-row>


        <div *ngIf="verMaisInformacoes">
            <ion-item class="item-info" no-lines>
                <h3>
                    <ion-icon name="call"></ion-icon>{{dadosPessoaEmpresa.Perfil.Telefone}} {{dadosPessoaEmpresa.Perfil.Telefone2}}
                </h3>
                <h3>
                    <ion-icon name="paper"></ion-icon>
                    {{dadosPessoaEmpresa.Conta.Resumo}}
                </h3>
            </ion-item>
            <button class="botao-bool" (click)="verMaisInformacoes = false" ion-item clear full *ngIf="verMaisInformacoes"> Ver menos
                                                    </button>
        </div>
    </ion-list>

    <ion-list class="cards" no-lines>
        <ion-item-divider> Minha avaliação
        </ion-item-divider>

        <div *ngIf="!avaliando && dadosPessoaEmpresa.PessoaEmpresa.Comentario">
            <ion-item class="minha-avaliacao">
                <p>Comentario: {{dadosPessoaEmpresa.PessoaEmpresa.Comentario}}</p>
                <p class="estrela-nota-avaliacao" *ngIf="dadosPessoaEmpresa.PessoaEmpresa.Nota">Nota: <img onerror="this.src='https://png.pngtree.com/svg/20170602/person_1058425.png'" src="./assets/svg/estrela.svg" alt=""> {{dadosPessoaEmpresa.PessoaEmpresa.Nota}}</p>

            </ion-item>
            <!-- <button class="botao-bool" (click)="avaliando = true" ion-item clear full> Editar
                </button> -->
        </div>

        <div *ngIf="avaliando">
            <ion-item>
                <ion-label>
                    <ion-icon name="star"></ion-icon>
                </ion-label>
                <ion-input type="number" [(ngModel)]="dadosPessoaEmpresa.PessoaEmpresa.Nota" placeholder="0 a 5"></ion-input>
            </ion-item>

            <ion-item>
                <ion-label>
                    <ion-icon name="paper"></ion-icon>
                </ion-label>
                <ion-textarea rows="2" maxlength="100" [(ngModel)]="dadosPessoaEmpresa.PessoaEmpresa.Comentario" placeholder="Comentário"></ion-textarea>
            </ion-item>
        </div>

        <button class="botao-bool" (click)="avaliando = true" ion-item clear full *ngIf="!avaliando && !dadosPessoaEmpresa.PessoaEmpresa.Comentario"> Avaliar
                </button>
        <button class="botao-bool" (click)="atualizeDadosPessoaEmpresa(); avaliando = false" ion-item clear full *ngIf="avaliando"> Salvar
                </button>
    </ion-list>

    <ion-list class="cards" *ngIf="notasComentariosPessoasEmpresas && notasComentariosPessoasEmpresas.length > 0">
        <ion-item-divider> Avaliações
        </ion-item-divider>
        <ion-item *ngFor="let notaComentarios of notasComentariosPessoasEmpresas">
            <ion-avatar item-start>
                <img onerror="this.src='https://png.pngtree.com/svg/20170602/person_1058425.png'" [src]="pessoaProvider.obtenhaFotoPessoa(notaComentarios.IdPessoa)">
            </ion-avatar>
            <h2>{{notaComentarios.Nome}}</h2>
            <p>{{notaComentarios.Comentario}}</p>
            <p class="estrela-nota-avaliacao" *ngIf="notaComentarios.Nota"><img onerror="this.src='https://png.pngtree.com/svg/20170602/person_1058425.png'" src="./assets/svg/estrela.svg" alt=""> {{notaComentarios.Nota}}</p>
            <p item-end>{{notaComentarios.DataAvaliacao | Data}}</p>
        </ion-item>
    </ion-list>

    <ion-fab bottom right>
        <button ion-fab [disabled]="!compartilharHabilitado" (click)="compartilhe()">  <ion-icon name="md-share"></ion-icon>
        </button>
    </ion-fab>
</ion-content>